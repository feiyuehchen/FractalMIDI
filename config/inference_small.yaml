# Inference configuration for small model
# Matches train_small.yaml settings

# Model checkpoint
checkpoint: null                          # Path to model checkpoint (required)

# Generation mode
mode: unconditional                       # Options: unconditional, conditional, inpainting

# Unconditional generation settings
unconditional:
  num_samples: 5
  length: 512                             # Match training length
  temperature: 0.95                       # Lower temperature for more coherent output
  sparsity_bias: 0.15                     # Reduce note density (higher = fewer notes)
  velocity_threshold: 0.25                # Higher threshold to filter out low-velocity notes

# Conditional generation settings (prefix-based)
conditional:
  condition_midi: null                    # Input MIDI file path
  generation_length: 512                  # Match training length
  temperature: 0.95
  sparsity_bias: 0.15
  velocity_threshold: 0.25

# Inpainting settings
inpainting:
  input_midi: null                        # Input MIDI file path
  mask_start: 32                          # Adjusted for shorter sequences
  mask_end: 96
  temperature: 0.95
  sparsity_bias: 0.15
  velocity_threshold: 0.25

# Output settings
output:
  output_dir: outputs/inference_small
  save_midi: true
  save_png: true
  save_gif: true                          # Save generation process as GIF
  gif_fps: 2

# Hardware
device: cuda:2                            # Device to use for inference
seed: 42

